<!DOCTYPE html>
<html>
<head>
	<title>【BiliBili 秋】头图景深对焦效果</title>
	<style type="text/css">
		body {
			margin: 0;
		}
		header {
			height: 160px;
			position: relative;
			overflow: hidden;
		}
		header > div {
			position: absolute;
			left: 0;
			top: 0;
			height: 100%;
			display: flex;
			justify-content: center;
			align-items: center;
		}
		header > div > img {
			display: block;
			width: 110%;
			height: 100%;
			object-fit: cover;
			transform: translateX(var(--offset));
			filter: blur(var(--blur));
		}
	</style>
</head>
<body>
	<header>
		<div><img src="./bilibili-autumn-1.png"></div>
		<div><img src="./bilibili-autumn-2.png"></div>
		<div><img src="./bilibili-autumn-3.png"></div>
		<div><img src="./bilibili-autumn-4.png"></div>
		<div><img src="./bilibili-autumn-5.png"></div>
		<div><img src="./bilibili-autumn-6.png"></div>
	</header>
	<script type="text/javascript">
		const images = document.querySelectorAll('header > div > img ')
		document.querySelector('header').addEventListener('mousemove', e => {
			let percentage = e.clientX / window.outerWidth
			let offset = 10 * percentage
  			let blur = 20

  			for (const [index, image] of images.entries()) {
  				offset *= 1.3
  				const blurVal = Math.pow(index / images.length - percentage, 2) * blur
  				image.style.setProperty('--offset', `${offset}px`)
    			image.style.setProperty('--blur', `${blurVal}px`)
  			}

		})
	</script>
</body>
</html>